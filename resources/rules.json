[
  {
    "name": "KLMFltCacheCheck",
    "desc": "when airline is KLM and flt departure is within 3 to 7 days of booking",
    "salience": 9,
    "when": "FltSearchRequest.AirlineCode == \"KL\" && FltSearchRequest.DepartureDateTime > RuleInfo.AddDays(FltSearchRequest.BookingTime, 3) && FltSearchRequest.DepartureDateTime < RuleInfo.AddDays(FltSearchRequest.BookingTime, 7) && RuleInfo.Cacheable == false",
    "then": [
      "RuleInfo.Cacheable = true",
      "Log(\"Result available in cache\")"
    ]
  },
  {
    "name": "AFFltCacheCheck",
    "desc": "when airline is AF and flt departure is within 3 to 7 days of booking",
    "salience": 9,
    "when": "FltSearchRequest.AirlineCode == \"AF\" && FltSearchRequest.DepartureDateTime > RuleInfo.AddDays(FltSearchRequest.BookingTime, 3) && FltSearchRequest.DepartureDateTime < RuleInfo.AddDays(FltSearchRequest.BookingTime, 7) && RuleInfo.Cacheable == false",
    "then": [
      "RuleInfo.Cacheable = true",
      "Log(\"Result available in cache\")"
    ]
  },
  {
    "name": "FlightDepartureDateCheck",
    "desc": "when the flight's departure date is a past date",
    "salience": 8,
    "when": "RuleInfo.IsPastDate(FltSearchRequest.DepartureDateTime) && RuleInfo.IsProcessingCompleted == false",
    "then": [
      "RuleInfo.IsProcessingCompleted = true",
      "RuleInfo.AirlineCode = FltSearchRequest.AirlineCode",
      "Log(\"Result not available in cache\")"
    ]
  },
  {
    "name": "FlightRouteAMSHAJCheck",
    "desc": "when origin is AMS and destination is HAJ",
    "salience": 8,
    "when": "FltSearchRequest.DepartureAirportCode == \"AMS\" && FltSearchRequest.ArrivalAirportCode == \"HAJ\" && RuleInfo.IsProcessingCompleted == false",
    "then": [
      "RuleInfo.Cacheable = true",
      "RuleInfo.IsProcessingCompleted = true",
      "Log(\"Result available in cache\")"
    ]
  },
  {
    "name": "FlightRouteAMSJFKCheck",
    "desc": "when origin is AMS and destination is JFK",
    "salience": 8,
    "when": "FltSearchRequest.DepartureAirportCode == \"AMS\" && FltSearchRequest.ArrivalAirportCode == \"JFK\" && RuleInfo.IsProcessingCompleted == false",
    "then": [
      "RuleInfo.Cacheable = true",
      "RuleInfo.IsProcessingCompleted = true",
      "Log(\"Result available in cache\")"
    ]
  },
  {
    "name": "PeakworkDataIngestion",
    "desc": "rule to provide the search details for Peakwork",
    "salience": 10,
    "when": "FltSearchRequest.RuleGroup == \"Peakwork\" && FltSearchRequest.RequestType == \"GetSearchScenarios\" && RuleInfo.IsProcessingCompleted == false",
    "then": [
      "RuleInfo.Cacheable = true",
      "RuleInfo.IsProcessingCompleted = true",
      "RuleInfo.IsPeakworkData = true",
      "RuleInfo.Origins = \"AMS, WAW, LHR\"",
      "RuleInfo.Destinations = \"HAJ, NYC, VIE\"",
      "RuleInfo.AirlineCode = \"EK\"",
      "RuleInfo.PeakworkEarliestDepDate = \"2022-02-01\"",
      "RuleInfo.PeakworkLatestDepDate = \"2024-02-05\"",
      "RuleInfo.PeakworkFltDurations = \"3, 5, 7\"",
      "Log(\"Result available in cache\")"
    ]
  }
]